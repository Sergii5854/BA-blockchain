(function(t){function n(n){for(var i,s,o=n[0],c=n[1],u=n[2],h=0,f=[];h<o.length;h++)s=o[h],a[s]&&f.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(n);while(f.length)f.shift()();return r.push.apply(r,u||[]),e()}function e(){for(var t,n=0;n<r.length;n++){for(var e=r[n],i=!0,o=1;o<e.length;o++){var c=e[o];0!==a[c]&&(i=!1)}i&&(r.splice(n--,1),t=s(s.s=e[0]))}return t}var i={},a={app:0},r=[];function s(n){if(i[n])return i[n].exports;var e=i[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=i,s.d=function(t,n,e){s.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,n){if(1&n&&(t=s(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)s.d(e,i,function(n){return t[n]}.bind(null,i));return e},s.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(n,"a",n),n},s.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=n,o=o.slice();for(var u=0;u<o.length;u++)n(o[u]);var l=c;r.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"034f":function(t,n,e){"use strict";var i=e("64a9"),a=e.n(i);a.a},1:function(t,n){},1437:function(t,n,e){},2:function(t,n){},"56d7":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("097d");var i=e("2b0e"),a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("Hero"),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("h2",[t._v("Without signature")]),e("b-button",{staticClass:"btn btn-md btn-success",on:{click:t.addTransition}},[t._v("Add Transition\n                ")])],1),e("div",{staticClass:"col-sm-6"},[e("h2",[t._v("With signature")]),e("button",{staticClass:"btn btn-md btn-success",on:{click:t.addTx}},[t._v("Add Transition\n                ")])]),e("div",{staticClass:"text-center"},[e("pre",{staticClass:"row"},[t._v("                    "+t._s(t.blockChain)+"\n\n                ")])])])])],1)},r=[],s=e("9f7b"),o=(e("f9e3"),e("2dd8"),e("b9a8")),c=e.n(o),u=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"hero-background"})},l=[],h={name:"Hero"},f=h,d=(e("cb27"),e("2877")),v=Object(d["a"])(f,u,l,!1,null,"05f47d58",null);v.options.__file="hero.vue";var p=v.exports,y=(e("ac4d"),e("8a81"),e("ac6a"),e("d4ec")),b=e("bee2"),g=e("0b26"),m=e.n(g),k=function(){function t(n,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(y["a"])(this,t),this.timestamp=n,this.transactions=e,this.previousHash=i,this.hash=this.calculateHash(),this.nonce=0}return Object(b["a"])(t,[{key:"calculateHash",value:function(){return m()(this.index+this.previousHash+this.timestamp+JSON.stringify(this.transaction)+this.nonce)}},{key:"mineBlock",value:function(t){while(this.hash.substring(0,t)!==Array(t+1).join("0"))this.nonce++,this.hash=this.calculateHash();console.log("block mined  ".concat(this.hash," "))}},{key:"hasValidTransaction",value:function(){var t=!0,n=!1,e=void 0;try{for(var i,a=this.transactions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;if(!r.isValid())return!1}}catch(s){n=!0,e=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw e}}return!1}}]),t}(),w=function(){function t(n,e,i){Object(y["a"])(this,t),this.from=n,this.to=e,this.amount=i}return Object(b["a"])(t,[{key:"calculateHash",value:function(){return m()(this.from+this.to+this.amount)}},{key:"signTransaction",value:function(t){if(t.getPublic("hex")!==this.from)throw new Error("You cannot sign Transaction for other wallets");var n=this.calculateHash(),e=t.sign(n,"base64");this.signature=e.toDER("hex")}},{key:"isValid",value:function(){if(null===this.from)return!0;if(!this.signature||0===this.signature.length)throw new Error("No signature in this transaction");var t=new c.a("secp256k1"),n=t.keyFromPublic(this.from,"hex");return n.verify(this.calculateHash(),this.signature)}}]),t}(),x=function(){function t(){Object(y["a"])(this,t),this.chain=[this.createGenesisBlock()],this.difficulty=2,this.pendingTransactions=[],this.miningReward=1}return Object(b["a"])(t,[{key:"createGenesisBlock",value:function(){return new k("15/11/2018","this important data GenesisBlock","0")}},{key:"getLastBlock",value:function(){return this.chain[this.chain.length-1]}},{key:"addBlock",value:function(t){t.previousHash=this.getLastBlock().hash,t.mineBlock(this.difficulty),this.chain.push(t)}},{key:"mineTransaction",value:function(t){var n=new w(null,t,this.miningReward);this.pendingTransactions.push(n);var e=new k(Date.now(),this.pendingTransactions,this.getLastBlock().hash);e.mineBlock(this.difficulty),console.log("block successfully mined"),this.chain.push(e),this.pendingTransactions=[]}},{key:"addTransaction",value:function(t){if(!t.from||!t.to)throw new Error("transaction must include from and to  Addresses");if(!t.isValid())throw new Error("Cannot add invalid transaction to Chain ");this.pendingTransactions.push(t)}},{key:"getBalanceOfAddress",value:function(t){var n=0,e=!0,i=!1,a=void 0;try{for(var r,s=this.chain[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value,c=!0,u=!1,l=void 0;try{for(var h,f=o.transactions[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var d=h.value;d.from===t&&(n-=d.amount),d.to===t&&(n+=d.amount)}}catch(v){u=!0,l=v}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}}}catch(v){i=!0,a=v}finally{try{e||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"isValid",value:function(){for(var t=1;t<this.chain.length;t++){var n=this.chain[t],e=this.chain[t-1];if(!n.hasValidTransaction())return!1;if(n.hash!==n.calculateHash())return!1;if(n.previousHash!==e.hash)return!1}return!0}}]),t}(),T=new c.a("secp256k1"),_=T.genKeyPair();console.log(_);var O=_.getPublic("hex"),C=_.getPrivate("hex");console.group("Generate Key Pair"),console.log("Public key: ".concat(O)),console.log("Privet key: ".concat(C)),console.groupEnd();e("6b54"),e("a481");function j(t,n){return Math.floor(Math.random()*(n-t+1)+t)}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return Math.random().toString().replace("0.","").slice(0,t)}i["a"].use(s["a"]);var B={name:"app",data:function(){return{blockChain:new x,index:0,myKey:this.getMyKey(),myWalletAddress:this.getMyWalletAddress()}},components:{Hero:p},methods:{getMyKey:function(){var t=new c.a("secp256k1");return console.log(t.keyFromPrivate("47c38c05301db390963a0807f1ae35db3248147a0abffa20f0a12ab8cdd46e15")),t.keyFromPrivate("47c38c05301db390963a0807f1ae35db3248147a0abffa20f0a12ab8cdd46e15")},getMyWalletAddress:function(){return this.getMyKey().getPublic("hex")},addTransition:function(){var t=P(),n=P(),e=j(0,100),i=new Date,a=new w(t,n,e),r=new k(++this.index,i,a);this.addBlock2Chain(r)},addBlock2Chain:function(t){this.blockChain.addBlock(t)},addTx:function(){var t=P(),n=j(0,100),e=new w(this.myWalletAddress,t,n);e.signTransaction(this.myKey),this.blockChain.addTransaction(e),this.blockChain.mineTransaction(this.myWalletAddress)}}},H=B,M=(e("034f"),Object(d["a"])(H,a,r,!1,null,null,null));M.options.__file="App.vue";var A=M.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(A)}}).$mount("#app")},"64a9":function(t,n,e){},cb27:function(t,n,e){"use strict";var i=e("1437"),a=e.n(i);a.a}});
//# sourceMappingURL=app.21583c4b.js.map